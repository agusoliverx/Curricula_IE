<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Malla Ingeniería Eléctrica - Perfil Biomédica</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      padding: 30px;
      background-color: #f8fafc;
      color: #333;
    }
    h1 {
      text-align: center;
      margin-bottom: 40px;
      color: #2978b5;
      font-weight: 700;
      font-size: 2rem;
    }

    table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0 10px;
      background: #fff;
      box-shadow: 0 6px 15px rgba(0,0,0,0.08);
      border-radius: 8px;
      overflow: hidden;
    }

    thead tr {
      background-color: #2978b5;
      color: white;
      font-weight: 700;
      font-size: 1rem;
      user-select: none;
    }

    th, td {
      padding: 15px 20px;
      vertical-align: top;
    }

    th {
      text-align: center;
      width: 70px;
      border-right: 1px solid rgba(255,255,255,0.3);
    }

    tbody tr {
      background-color: #fefefe;
      box-shadow: 0 2px 6px rgba(0,0,0,0.04);
      border-radius: 8px;
      transition: background-color 0.3s ease;
    }

    tbody tr:hover {
      background-color: #f0f7ff;
    }

    td.courses {
      padding-left: 0;
    }

    .course {
      display: inline-block;
      background-color: #e3eaf7;
      color: #2978b5;
      padding: 6px 12px;
      margin: 6px 6px 6px 0;
      border-radius: 14px;
      border: 1px solid #bdd1f7;
      cursor: pointer;
      position: relative;
      transition: background-color 0.25s ease, color 0.25s ease, border-color 0.25s ease;
      font-weight: 600;
      font-size: 0.9rem;
      user-select: none;
    }

    .course.completed {
      background-color: #c8e6c9; /* verde pastel */
      color: #2e7d32;
      border-color: #2e7d32;
    }
    .course.completed::after {
      content: "";
      position: absolute;
      left: 10px;
      top: 50%;
      width: calc(100% - 20px);
      border-bottom: 3px solid #2e7d32;
      transform: translateY(-50%) rotate(-45deg);
      pointer-events: none;
      border-radius: 2px;
      z-index: 1;
    }

    .course.in-progress {
      background-color: #fff3b0; /* amarillo pastel */
      color: #b38600;
      border-color: #b38600;
    }

    .course:hover {
      background-color: #d7e6fc;
      border-color: #5596e6;
      color: #1c3c72;
      box-shadow: 0 0 8px rgba(85, 150, 230, 0.4);
    }

    /* Tooltip */
    .course[title]:hover::after {
      content: attr(title);
      position: absolute;
      left: 50%;
      bottom: 140%;
      transform: translateX(-50%);
      background: #2978b5;
      color: white;
      padding: 8px 14px;
      border-radius: 8px;
      white-space: nowrap;
      font-size: 0.8rem;
      box-shadow: 0 3px 8px rgba(0,0,0,0.3);
      z-index: 10;
      pointer-events: none;
      opacity: 1;
      transition: opacity 0.25s ease;
    }
    .course[title]::after {
      opacity: 0;
    }
    .course[title]:not(:hover)::after {
      opacity: 0;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ing. Eléctrica (Perfil Biomédica)</h1>

  <table>
    <thead>
      <tr>
        <th>Sem.</th>
        <th>Materias</th>
      </tr>
    </thead>
    <tbody id="malla-body">
      <!-- Se genera dinámicamente -->
    </tbody>
  </table>

  <script>
    // Tu script permanece igual, solo asegúrate de copiarlo aquí.
    // Para no hacerlo largo, te lo dejo idéntico al que me diste.
    const malla = {
      1: [
        "Cálculo dif. e integral en una variable",
        "GAL 1",
        "Física 1",
      ],
      2: [
        "Cálculo dif. e integral en varias variables",
        "GAL 2",
        "Física 2",
        "Programación 1",
      ],
      3: [
        "Cálculo Vectorial",
        "Probabilidad y Estadística",
        "Física 3",
        "Mecánica Newtoniana",
        "Física Experimental 1",
      ],
      4: [
        "Ecuaciones Diferenciales",
        "Electromagnetismo",
        "Física Experimental 2",
        "Teoría de Circuitos",
        "Diseño Lógico",
      ],
      5: [
        "Funciones de Variable Compleja (Nueva)",
        "Señales y Sistemas",
        "Intro. a los microprocesadores",
        "Programación para Ingeniería Eléctrica",
        "Electrónica Fundamental",
      ],
      6: [
        "Métodos numéricos",
        "Sistemas y Control",
        "Taller Fourier",
        "Señales aleatorias y Modulación",
        "Opcional Ingeniería Eléctrica",
      ],
      7: [
        "Medidas Eléctricas",
        "Opcional Ingeniería Eléctrica",
        "Opcional Básica",
        "Opcional Ingeniería Biológica",
        "Estimación y predicción en series temporales",
      ],
      8: [
        "Pasantía",
        "Redes de Datos I",
        "Ingeniería Biomédica",
        "AIMDs",
        "Opcional Ingeniería Eléctrica",
      ],
      9: [
        "Proyecto",
        "Opcional Ing. Industrial",
        "Opcional Ingeniería Biológica",
        "Electrotecnia",
      ],
      10: [
        "Proyecto",
        "Legislación y relaciones industriales",
        "Opc. Ingeniería y sociedad",
        "Economía",
        "Instalaciones Eléctricas",
      ],
    };

    const previas = {
      "Cálculo dif. e integral en una variable": [],
      "GAL 1": [],
      "Física 1": [],

      "Cálculo dif. e integral en varias variables": ["Cálculo dif. e integral en una variable"],
      "GAL 2": ["GAL 1"],
      "Física 2": ["Cálculo dif. e integral en una variable", "Física 1"],
      "Programación 1": [],

      "Cálculo Vectorial": [
        "Cálculo dif. e integral en varias variables",
        "Cálculo dif. e integral en una variable",
        "GAL 1"
      ],
      "Probabilidad y Estadística": [
        "Cálculo dif. e integral en una variable",
        "Cálculo dif. e integral en varias variables",
        "GAL 1"
      ],
      "Física 3": ["Cálculo dif. e integral en una variable"],
      "Mecánica Newtoniana": [
        "Física 1",
        "Cálculo dif. e integral en varias variables",
        "Física 2 o Física 3",
        "Cálculo dif. e integral en una variable"
      ],
      "Física Experimental 1": ["Física 1"],

      "Ecuaciones Diferenciales": [
        "Cálculo dif. e integral en una variable",
        "Cálculo dif. e integral en varias variables",
        "GAL 1",
        "GAL 2"
      ],
      "Electromagnetismo": [
        "GAL 1",
        "GAL 2",
        "Cálculo dif. e integral en una variable",
        "Cálculo dif. e integral en varias variables",
        "Cálculo Vectorial"
      ],
      "Física Experimental 2": ["Física Experimental 1", "Física 3"],
      "Teoría de Circuitos": [
        "Física 1",
        "Física 3",
        "Cálculo dif. e integral en una variable",
        "Cálculo dif. e integral en varias variables",
        "GAL 1"
      ],
      "Diseño Lógico": []
    };

    const tbody = document.getElementById("malla-body");

    Object.entries(malla).forEach(([semestre, cursos]) => {
      const tr = document.createElement("tr");

      // Columna semestre (con º)
      const tdSem = document.createElement("th");
      tdSem.textContent = `${semestre}º`;
      tr.appendChild(tdSem);

      // Columna cursos
      const tdCursos = document.createElement("td");
      tdCursos.className = "courses";

      cursos.forEach(curso => {
        const divCurso = document.createElement("div");
        divCurso.className = "course";
        divCurso.textContent = curso;

        const pre = previas[curso];
        const preText = (pre && pre.length > 0) ? `Previas: ${pre.join(", ")}` : "Previas: Ninguna";
        divCurso.title = preText;

        divCurso.onclick = () => {
          if (divCurso.classList.contains("completed")) {
            divCurso.classList.remove("completed");
            divCurso.classList.add("in-progress");
          } else if (divCurso.classList.contains("in-progress")) {
            divCurso.classList.remove("in-progress");
          } else {
            divCurso.classList.add("completed");
          }
        };

        tdCursos.appendChild(divCurso);
      });

      tr.appendChild(tdCursos);
      tbody.appendChild(tr);
    });
  </script>
</body>
</html>
